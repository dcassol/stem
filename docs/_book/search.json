[{"path":"index.html","id":"welcome","chapter":"Welcome","heading":"Welcome","text":"","code":""},{"path":"index.html","id":"about","chapter":"Welcome","heading":"About","text":"Add project description","code":""},{"path":"index.html","id":"what-to-expect","chapter":"Welcome","heading":"What to expect?","text":"Expected outputadd short description chapter research","code":"\nlibrary(readr)  # For reading CSV files\nlibrary(dplyr)  # For data manipulation"},{"path":"index.html","id":"import-csv","chapter":"Welcome","heading":"0.1 Import csv","text":"","code":"\noccupation_by_state <- read.csv(\"data/occupation.csv\")\nhead(occupation_by_state)\nfiltered_data <- occupation_by_state %>%\n  filter(grepl(\"B24020_019|B24020_170\", variable, ignore.case = TRUE))\n\nproportions <- filtered_data %>%\n  group_by(Year, NAME, sex) %>%  # Assuming 'NAME' is the state name\n  summarise(total_estimate = sum(estimate, na.rm = TRUE), .groups = 'drop') %>%\n  group_by(Year, NAME) %>%\n  mutate(proportion = total_estimate / sum(total_estimate)) %>%\n  select(Year, NAME, sex, proportion)\n\n\nproportions <- proportions %>%\n  mutate(proportion = proportion * 100) \n# Library for interactive visualization\n# Library for interactive visualization\nlibrary(plotly)\n\n# Get unique states\nstate_levels <- unique(proportions$NAME)\n\n# Prepare the buttons for the dropdown menu for state selection\nbuttons <- lapply(state_levels, function(state) {\n  list(method = \"update\",\n       args = list(list(visible = sapply(proportions$NAME, function(x) x == state)),\n                   list(title = paste(\"Proportion of Male/Female in\", state, \"over the Years\"))),\n       label = state)\n})\n\n# Create the plot with all traces initially visible but will toggle with dropdown\nplot <- plot_ly()\n\n# Loop through each state to add traces for Male and Female\nfor (state in state_levels) {\n  plot <- plot %>%\n    add_trace(data = proportions[proportions$NAME == state & proportions$sex == \"Male\", ],\n              x = ~Year, y = ~proportion, mode = 'lines+markers',\n              name = paste(\"Male\", state), visible = state == state_levels[1],  # Visibility set for the first state\n              line = list(color = 'blue', width = 4)) %>%\n    add_trace(data = proportions[proportions$NAME == state & proportions$sex == \"Female\", ],\n              x = ~Year, y = ~proportion, type = 'scatter', mode = 'lines+markers',\n              name = paste(\"Female\", state), visible = state == state_levels[1],  # Visibility set for the first state\n              line = list(color = 'red'), marker = list(size = 7))\n}\n\n# Final layout configuration\nplot <- plot %>%\n  layout(title = \"Proportion of Male/Female over the Years by State\",\n         xaxis = list(title = 'Year'),\n         yaxis = list(title = 'Percentage', range = c(0, 100)),\n         hovermode = 'closest',\n         showlegend = TRUE,\n         updatemenus = list(\n           list(\n             x = 0.0,\n             xanchor = 'left',\n             y = 1.0,\n             yanchor = 'top',\n             buttons = buttons\n           )\n         ))\n\n# Render the plot\nplot"}]
